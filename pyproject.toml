[tool.isort]
profile = "black"
lines_after_imports = 2
src_paths = ["kinto-remote-settings", "tests"]

[tool.pytest.ini_options]
# https://docs.pytest.org/en/6.2.x/usage.html
# -ra: shows test summary for all EXCEPT passed and passed with output
# --showlocals: show local variables in tracebacks
# --tb=native: traceback printing with Python standard library formatting
addopts = "-ra --showlocals --tb=native"
sensitive_url = ".mozaws.net"
asyncio_mode = "strict"

[tool.coverage]
# https://github.com/nedbat/coveragepy
    [tool.coverage.run]
    omit = [
        '*/.local/*',
        '/usr/*',
        '*/.venv/*',
        '*/.tox/*',
        '*/virtualenvs/*',
    ]

    [tool.coverage.report]

    exclude_lines = [
        "# noqa",
        "raise NotImplementedError",
        "pragma: no cover",
        "def __repr__",
        "if .debug:",
        "raise NotImplementedError",
        "if __name__ == .__main__.:",
        "logger.",
        "from",
        "import"
    ]

[tool.poetry]
name = "remote-settings"
version = "0"
description = "Easily manage evergreen settings data in Firefox"
authors = ["@mozilla/remote-settings-reviewers"]
license = "MPL"
readme = "README.rst"

[tool.poetry.dependencies]
python = "^3.11"
canonicaljson-rs = "0.5.0"
cryptography = "41.0.3"
ecdsa = "0.18.0"
kinto = {version = "^16.0.0", extras = ["postgresql","memcached","monitoring"]}
kinto-attachment = "6.3.1"
kinto-emailer = "2.1.0"
requests-hawk = "1.2.1"
uwsgi = "2.0.21"

[tool.poetry.group.kinto-remote-settings.dependencies]
kinto-remote-settings = {path = "./kinto-remote-settings", develop = true}

[tool.poetry.group.dev.dependencies]
black = "23.7.0"
flake8 = "6.1.0"
isort = "5.12.0"
pytest = "7.4.0"
webtest = "3.0.0"
coverage = "7.3.0"
detect-secrets = "^1.4.0"

[tool.poetry.group.integration-tests]
optional = true

[tool.poetry.group.integration-tests.dependencies]
aiohttp = "3.8.5"
autograph-utils = "0.1.1"
canonicaljson-rs = "0.5.0"
httpie = "3.2.1"
kinto-http = "11.0.1"
pytest = "7.4.0"
pytest-asyncio = "0.20.3"
pytest-selenium = "4.0.1"
webtest = "3.0.0"

[tool.poetry.group.docs]
optional = true

[tool.poetry.group.docs.dependencies]
docutils = "0.19"
sphinx = "6.1.3"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"
